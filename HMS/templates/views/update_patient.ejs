<!DOCTYPE html>
<html lang="en">
<%- include('includes/head') %>

<body>
  <% if (userType === 'admin') { %>
  <%- include('includes/navbar') %>
  <% }else if (userType === 'doctor') { %>
  <%- include('includes/doc_navbar') %>
  <% } %>

  <section class="main">
    <!-- Update Patient content -->
    <form action="#" id="update_pat_form">
      <div class="container-fluid p-3 bg-white rounded-2">
        <h2 class="mt-2">Update Patient Details</h2>

        <div class="update-pat-container">
          <!-- name and mail id -->
          <div class="row mt-4">
            <div class="col-lg-6 m-0">
              <label for="update_pat_name">Full Name</label><br />

              <input type="text" placeholder="Patient Full Name" class="form-control rounded-4" id="update_pat_name" value="<%= patient.full_name %>" />
            </div>

            <div class="col-lg-6 m-0">
              <label for="update_pat_mail">Email</label><br />

              <input type="email" placeholder="Patient Email ID" class="form-control rounded-4" id="update_pat_mail" value="<%= patient.email %>" />
            </div>
          </div>

          <!-- Age, DOB and gender -->
          <div class="row mt-4">
            <div class="col-lg-4 m-0">
              <label for="update_pat_dob">Date of Birth</label><br />

              <input type="date" class="form-control rounded-4" id="update_pat_dob" value="<%= patient.date_of_birth %>" />
            </div>

            <div class="col-lg-4 m-0">
              <label for="update_pat_age">Age</label><br />

              <input class="form-control rounded-4" type="number" aria-label="Patient Age" id="update_pat_age" placeholder="Patient Age" value="<%= patient.age %>" />
            </div>

            <div class="col-lg-4">
              <label for="update_pat_gender">Gender</label><br />

              <select class="form-select rounded-4" aria-label="Gender" id="update_pat_gender">
                <option value="" disabled>------Select------</option>
                <option value="male" <%= patient.gender === 'Male' ? 'selected' : '' %>>Male</option>
                <option value="female" <%= patient.gender === 'Female' ? 'selected' : '' %>>Female</option>
                <option value="other" <%= patient.gender === 'Other' ? 'selected' : '' %>>Others</option>
              </select>
            </div>
          </div>

          <!-- Contact details -->
          <div class="row mt-4">
            <div class="col-lg-6 m-0">
              <label for="update_pat_contact_number">Contact Details</label><br />

              <input class="form-control rounded-4" type="text" minlength="10" aria-label="Contact Number" id="update_pat_contact_number" placeholder="Contact Number" value="<%= patient.contact_number %>" />
            </div>

            <div class="col-lg-6 m-0">
              <label for="update_pat_emerg_contact_number">Emergency Contact Details</label><br />

              <input class="form-control rounded-4" type="text" minlength="10" aria-label="Emergency Contact Number" id="update_pat_emerg_contact_number" placeholder="Contact Number" value="<%= patient.emergency_contact_number %>" />
            </div>
          </div>

          <!-- address & marital status -->
          <div class="row mt-4">
            <div class="col-lg-6 m-0">
              <label for="update_pat_address">Address</label><br />

              <input type="text" class="form-control rounded-4" aria-label="Address" id="update_pat_address" placeholder="Patient's Address" value="<%= patient.address %>" />
            </div>

            <div class="col-lg-6 m-0">
              <label for="update_pat_marital">Marital Status</label><br />

              <select class="form-select rounded-4" aria-label="Marital Status" id="update_pat_marital">
                <option value="" disabled>------Select------</option>
                <option value="single" <%= patient.marital_status === 'Single' ? 'selected' : '' %>>Single</option>
                <option value="married" <%= patient.marital_status === 'Married' ? 'selected' : '' %>>Married</option>
                <option value="divorced" <%= patient.marital_status === 'Divorced' ? 'selected' : '' %>>Divorced</option>
                <option value="widowed" <%= patient.marital_status === 'Widowed' ? 'selected' : '' %>>Widowed</option>
                <option value="separated" <%= patient.marital_status === 'Separated' ? 'selected' : '' %>>Separated</option>
              </select>
            </div>
          </div>

          <!-- Ailment & Type -->
          <div class="row mt-4">
            <div class="col-lg-6">
              <label for="update_pat_ailment">Ailment</label><br />

              <input type="text" class="form-control rounded-4" aria-label="Ailment" id="update_pat_ailment" placeholder="Patient's Ailment" value="<%= patient.ailment %>" />
            </div>

            <div class="col-lg-6">
              <label for="update_pat_type">Patient Type</label><br />

              <select class="form-select rounded-4" aria-label="Patient Type" id="update_pat_type">
                <option value="" disabled>------Select------</option>
                <option value="in" <%= patient.type === 'In-patient' ? 'selected' : '' %>>In-patient</option>
                <option value="out" <%= patient.type === 'Out-patient' ? 'selected' : '' %>>Out-patient</option>
              </select>
            </div>
          </div>

          <div class="row mt-4 mb-4">
            <div class="col-lg-6">
              <label for="update_pat_status">Patient Status</label><br />

              <select class="form-select rounded-4" aria-label="Patient Type" id="update_pat_status">
                <option value="" disabled>------Select------</option>
                <option value="ongoing" <%= patient.treatment_status === 'Ongoing' ? 'selected' : '' %>>Ongoing</option>
                <option value="completed" <%= patient.treatment_status === 'Completed' ? 'selected' : '' %>>Completed</option>
              </select>
            </div>

            <div class="col-lg-6">
              <label for="update_pat_status">Assigned Doctor</label><br />

              <select class="form-select rounded-4" aria-label="Patient Type" id="update_pat_status">
                <option value="" disabled selected>------Select------</option>
                <% for(doc of doctors){ %>
                <option value="<%= doc.full_name %>" <%= patient.doctor_assigned === doc.full_name ? 'selected' : '' %>>
                  <%= doc.full_name %> (<%= doc.specialty %>)
                </option>
                <% } %>
              </select>
            </div>
          </div>

          <!-- create and reset buttons -->
          <div class="row d-flex align-items-center justify-content-center mt-4 mb-4">
            <button type="submit" class="btn btn-primary col-lg-2 m-2">
              Update
            </button>
            <a href="/<%= userType %>/patient/manage" class="btn btn-secondary col-lg-2 m-2" id="cancel_btn">
              Cancel
            </a>
          </div>
        </div>
      </div>
    </form>
  </section>

  <!-- bootstrap cdn -->
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <!-- Main js file -->
  <script defer src="/js/admin.js"></script>
</body>

</html>